{% extends 'quotes/base.html' %}
{% load static %}

{% block main_content %}
    <section>
        <div class="container">
            {#<router-link :to="{ name: 'survey-member'}" class="btn btn-danger">survey-member</router-link>#}
            <div class="row swap-div-mobile">
                <div class="col-lg-8">
                    <router-view></router-view>
                </div>

                <div class="col-lg-4 text-center">
                    <div class="position-absolute d-none d-lg-block rounded" id="separator"></div>
                    <div class="h-100 d-flex align-items-center justify-content-center">
                        <div class="">
                            <a href="#" class="btn btn-primary font-md font-wight-600 btn-lg">Assisted by Agent?</a>
                            <p class="small text-secondary pt-2">If you're being assisted by an Agent, click here</p>
                        </div>
                    </div>
                    <hr class="mb-5 d-block d-lg-none">
                </div>
            </div>
        </div>
    </section>
{% endblock %}


{% block vue_templates %}
    {# REMEMBER:: no multiple tags for vue component!! #}
    <script type="text/x-template" id="root-template">
        <div>
            <h1 class="font-wight-600 mb-3 font-xl responsive-font-xl heading-slogan">Find Affordable Health quotes&nbsp;<br>That’s Right for You</h1>
            <h2 class="font-wight-600 mb-4 font-md heading-mini-slogan">Instantly Compare Over 4,000<br>Insurance Plans</h2>
            <div id="find-plans" class="mb-5">
                <form novalidate class="border-md border-0 border-tertiary rounded" @submit.prevent="check_zipcode"
                      style="border-right-color: transparent !important;"> {# hack for bootstrap 1px error #}
                    <div class="row">
                        <div class="col-md-4 border-md-right border-0 border-tertiary">
                            <div class="py-1 pr-md-0 pl-md-3 px-3 mb-md-0 mb-3 border-md-0 border border-tertiary rounded">
                                <div class="text-capitalize text-secondary font-wight-600 quote-info-label">I'm looking For:</div>
                                <div class="text-capitalize font-md text-black quote-name">Health Insurance</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="py-1 px-md-0 px-3 mb-md-0 mb-3 border-md-0 border border-tertiary rounded">
                                <label for="home-zip-code" class="text-capitalize text-secondary font-wight-600 mb-0 quote-info-label">Zip Code</label>
                                <div class="position-relative">
                                    <input type="text" id="home-zip-code"
                                           class="font-md border-0 outline-0 w-100"
                                           :placeholder="zip_placeholder" v-model="zip_code" maxlength="5" v-on:keypress="validate_zip($event)">
                                    <div class="position-absolute vertical-center" style="left:99%" v-html="current_marker"></div>
                                </div>
                                <div class="home-zc-err"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="h-100 rounded" style="min-height: 50px;">
                                <button type="submit" class="text-capitalize rounded-0 btn btn-tertiary w-100 h-100 font-weight-bold font-md">Find plans</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="survey-card-template">
        <div class="card py-3 my-3 px-4 qt-survey">
            <div class="d-flex align-items-center qt-survey-who">
                <svg xmlns="http://www.w3.org/2000/svg" class="primary" width="15" height="15" viewBox="0 0 24 24">
                    <path d="M19 7.001c0 3.865-3.134 7-7 7s-7-3.135-7-7c0-3.867 3.134-7.001 7-7.001s7 3.134 7 7.001zm-1.598 7.18c-1.506 1.137-3.374 1.82-5.402 1.82-2.03 0-3.899-.685-5.407-1.822-4.072 1.793-6.593 7.376-6.593 9.821h24c0-2.423-2.6-8.006-6.598-9.819z"></path>
                </svg>
                <span class="font-md pl-2 font-md font-wight-600 text-capitalize">[[ survey_type ]]</span>
            </div>
            <p>What’s [[ txt_whos() ]] date of birth?
                <span class="border border-secondary rounded-circle cur-p qt-tooltip" v-if="survey_type == 'me'">?</span>
            </p>
            <input type="text" placeholder="mm/dd/yyyy" v-model="dob" :name="'dob-'+survey_type+index"
                   @keypress="prevent_NaN_input($event)" @keyup="auto_slash_insert"
                   class="font-mm border border-secondary mb-3 rounded qt-survey-input">

            <div class="qt-survey-gender my-3" v-if="['gender', 'tobacco'].indexOf(current_stage) > -1"><!--show only if current stage is gender or tobacco-->
                <p>What’s [[ txt_whos() ]] gender?
                    <span class="border border-secondary rounded-circle cur-p qt-tooltip" v-if="survey_type == 'me'">?</span>
                </p>
                <div class="btn-group w-100" role="group">
                    <input class="d-none controlled-by-label" type="radio" :name="'gender-'+survey_type+index" value="m" :id="'gender_m-'+survey_type+index" v-model="gender">
                    <label class="btn btn-outline-primary btn-lg col" :for="'gender_m-'+survey_type+index">Male</label>

                    <input class="d-none controlled-by-label" type="radio" :name="'gender-'+survey_type+index" value="f" :id="'gender_f-'+survey_type+index" v-model="gender">
                    <label class="btn btn-outline-primary btn-lg col" :for="'gender_f-'+survey_type+index">Female</label>
                </div>
            </div>

            <div class="qt-survey-tobacco my-3" v-if="current_stage === 'tobacco'">
                <p>
                    <span v-if="survey_type == 'me'">Do you</span>
                    <span v-else>Does your [[ survey_type ]]</span> use tobacco products?
                    <span class="border border-secondary rounded-circle cur-p qt-tooltip" v-if="survey_type == 'me'">?</span>
                </p>
                <div class="btn-group w-100" role="group">
                    <input class="d-none controlled-by-label" type="radio" :name="'tobacco-'+survey_type+index" value="true" :id="'tobacco_y-'+survey_type+index" v-model="tobacco">
                    <label class="btn btn-outline-primary btn-lg col" :for="'tobacco_y-'+survey_type+index">Yes</label>

                    <input class="d-none controlled-by-label" type="radio" :name="'tobacco-'+survey_type+index" value="false" :id="'tobacco_n-'+survey_type+index" v-model="tobacco">
                    <label class="btn btn-outline-primary btn-lg col" :for="'tobacco_n-'+survey_type+index">No</label>
                </div>
            </div>
            <div v-if="survey_type !== 'me'" class="position-absolute cur-p font-md font-wight-600 remove-card-X" {% comment %}@click="remove_survey_card(holder_types_enum.child, index)"{% endcomment %}>X</div>
        </div>
    </script>

    <script type="text/x-template" id="survey-template">
        <div>
            <router-link :to="{ name: 'root'}">
                <svg xmlns="http://www.w3.org/2000/svg" class="primary" width="16" height="16" viewBox="0 0 24 24">
                    <path d="M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"></path>
                </svg>
                Back
            </router-link>
            <div class="card text-center mt-2">
                <h5 class="card-header text-black font-wight-600">Tell us about you</h5>
                <div class="card-body">
                    <h5 class="card-title font-md font-wight-700">Who are you looking to insure?</h5>
                    <p class="card-text text-secondary font-sm mb-0">Include yourself plus any household members for this new coverage.</p>
                    <a href="#" class="card-link text-capitalize font-wight-600 font-md">learn more
                        <svg xmlns="http://www.w3.org/2000/svg" class="primary" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path>
                        </svg>
                    </a>
                    <br>
                    <div class="row text-left">
                        <div class="col-6 offset-3">
                            <survey-card :survey_type="holder_types_enum.own" :prop_max_age="99" :prop_min_age="21"></survey-card>

                            <template>
                                <survey-card v-if="spouse" :survey_type="holder_types_enum.spouse" :prop_max_age="99" :prop_min_age="21"></survey-card>
                                <div class="card py-3 my-3 px-4 cur-p qt-survey border-primary" @click="add_spouse" v-else>
                                    <div class="d-flex align-items-center qt-survey-who">
                                        <div class="font-md pl-2 font-sm font-wight-600 text-primary">
                                            <div class="bg-primary text-white d-inline-flex align-items-center justify-content-center font-wight-700 qt-single-icon">+</div>
                                            <span class="pl-2">Add a Spouse</span>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <template>
                                <survey-card v-if="dependents.length !== 0" v-for="(child, index) in dependents"
                                             :key="index" :index="index" :survey_type="holder_types_enum.child" :prop_max_age="99" :prop_min_age="21"></survey-card>
                                <div class="card py-3 my-3 px-4 cur-p qt-survey border-primary" @click="add_dependent" v-if="dependents.length <= max_dependents">
                                    <div class="d-flex align-items-center qt-survey-who">
                                        <div class="font-md pl-2 font-sm font-wight-600 text-primary">
                                            <div class="bg-primary text-white d-inline-flex align-items-center justify-content-center font-wight-700 qt-single-icon">+</div>
                                            <span class="pl-2">Add a Dependent</span>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <a href="https://www.nationshealthinsurance.com/health-insurance-quote/"
                               class="btn btn-tertiary btn-block btn-lg text-capitalize font-wight-600">Check Quote
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
{% endblock %}

{% block bottom_js %}
    <script src="{% static 'quotes/js/landing_page.js' %}"></script>
{% endblock %}
